<!-- 
Author: Derinell Rojas
Email: droja@bu.edu 
Date: 2025-02-27 
Description: template of form to show an indiv. profile for mini_fb
-->
{% extends 'mini_fb/base.html' %}

{% block content %}
<header>
    <h1 id="header-name">Mini Facebook</h1>
</header>

<div class="profiles-container-single">
    <table style="width: 100%; border-spacing: 20px;">
        <tr>
            <!-- Profile Information Column -->
            <td style="width: 50%; vertical-align: top;">
                <div class="profile-card-single">
                    <!-- Profile Image -->
                    <img src="{{ profile.image_file }}" alt="{{ profile.first_name }}'s profile image" class="profile-image" width="250" height="250">
                    <!-- Profile Details -->
                    <div class="profile-details-single">
                        <h2 id="name">{{ profile.first_name }} {{ profile.last_name }}</h2>
                        <p>{{ profile.city }}</p>
                        <p>{{ profile.email }}</p>
                    </div>
                    <br>
                    <br>
                    {% if request.user.is_authenticated %}
                    <div id="crud-contain">
                        
                        <h5 id="crud">
                            <a id=crud-a href="{% url 'create_status' profile.id%}";> Publish Status</a>
                        </h5>
                        <h5 id="crud">
                            <a id=crud-a href="{% url 'update_profile' profile.id%}"> Update Profile</a> 
                        </h5>
                    </div>               
                        {% endif %}

                </div>
                <div id="header-sugg">
                    <h2> {{profile.first_name}}'s Friends</h2>
                    {% if request.user.is_authenticated %}
                    <a href="{% url 'friend_suggestions' profile.pk %}"> 
                        <h4> Friend Suggestions </h4>
                    </a>
                   {% endif %}
                </div>
                
                
                <div id="friends">
                   {% for friend in profile.get_friends %}
                   <div id="friend">
                    <a href="{% url 'show_profile' friend.pk %}">
                    <img id="friend_img" src="{{friend.image_file}}"  width="100" height="100"/> 
                   </a>
                   <a href="{% url 'show_profile' friend.pk %}">
                    <p class="friend_name"> {{ friend.first_name }}</p>
                    <p class="friend_name"> {{ friend.last_name }}</p>
                  </a>
                </div>  
                   {% endfor %}
                </div>      
            </td>

            <!-- Status Messages Column -->
            
            <td style="width: 50%; vertical-align: top;">
                <h3>Status Board</h3>
             
                <div id="status-container">
                <br>

                    {% for message in profile.get_status_messages %}
                    <div id="status">
                        <strong>by <span id="message-name">{{ message.profile.first_name }}</span> at {{ message.timestamp }}</strong>
                        <p id="message">
                            {{ message.message }}
                        </p>
                        {% for img in message.get_images %}
                        <img src='{{ img.img_file.img_file.url}}' alt='{{ img.img_file.img_file.url }}' style="border-radius: 5px; width: 130px; height: 130px;">
                        <!-- Link URl to this status message -->
                        
                        {% endfor %}            
                        <br>
                            <br>
                       

                            {% if request.user.is_authenticated %}
                            <div id="crud" style="margin-right: 3px;">
                                <a href="{% url 'delete_status' message.pk%}" style="color:blue">Delete</a>
                            </div>

                            <div id="crud">
                                <a href="{% url 'update_status' message.pk%}" style="color:blue">Update</a>
                            </div>
                            {% endif %}
                      
                    </div>
                   <br>
                    {% endfor %}
                   
                </div>
            </td>
        </tr>
    </table>
</div>

{% endblock %}
